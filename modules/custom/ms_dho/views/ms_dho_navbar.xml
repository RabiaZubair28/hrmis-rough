<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Hide base "Transfer requests" nav for MS DHO (so they use Manage Transfer Requests) -->
    <template id="hrmis_hide_transfer_requests_for_msdho"
              inherit_id="hr_holidays_updates.hrmis_ui_layout"
              priority="60">
        <xpath expr="//nav[contains(@class,'hrmis-nav')]/a[normalize-space()='Transfer requests']" position="attributes">
            <attribute name="t-if">not request.env.user.has_group('custom_login.group_ms_dho')</attribute>
        </xpath>
    </template>

    <!-- MS DHO: add "Manage Transfer Requests" as last sidebar item -->
    <template id="hrmis_ui_layout_msdho_transfer_nav"
              inherit_id="hr_holidays_updates.hrmis_ui_layout"
              priority="9999">
        <!-- Append inside nav so it's always last -->
        <xpath expr="//nav[contains(@class,'hrmis-nav')]" position="inside">
            <t t-if="request.env.user.has_group('custom_login.group_ms_dho')">
                <a t-att-class="'hrmis-nav__item' + (' is-active' if active_menu == 'msdho_transfer_requests' else '')"
                   t-att-href="((not is_hrmis_employee) or (current_employee and current_employee.profile_complete))
                                and '/hrmis/msdho/transfer?tab=new' or '#'"
                   t-attf-style="cursor: #{ 'not-allowed' if is_hrmis_employee and (not current_employee or not current_employee.profile_complete) else 'pointer' }">
                    Manage Transfer Requests
                </a>
            </t>
        </xpath>
    </template>
</odoo>

